Content
=========

V2
---

V1
---

Prerequistes

	[vagrant@master81 ~]$ sudo nmcli conn mod eth1 +ipv4.dns 114.114.114.114,8.8.4.4

	[vagrant@master81 ~]$ sudo nmcli conn reload

	[vagrant@master81 ~]$ sudo nmcli conn show eth1
	connection.id:                          eth1
	connection.uuid:                        de826ad3-ace9-4777-8b6f-3f935357fa85
	connection.interface-name:              eth1
	connection.type:                        802-3-ethernet
	connection.autoconnect:                 yes
	connection.autoconnect-priority:        0
	connection.timestamp:                   1482672909
	connection.read-only:                   no
	connection.permissions:
	connection.zone:                        --
	connection.master:                      --
	connection.slave-type:                  --
	connection.autoconnect-slaves:          -1 (default)
	connection.secondaries:
	connection.gateway-ping-timeout:        0
	connection.metered:                     unknown
	802-3-ethernet.port:                    --
	802-3-ethernet.speed:                   0
	802-3-ethernet.duplex:                  --
	802-3-ethernet.auto-negotiate:          yes
	802-3-ethernet.mac-address:             08:00:27:C7:35:FE
	802-3-ethernet.cloned-mac-address:      --
	802-3-ethernet.mac-address-blacklist:
	802-3-ethernet.mtu:                     auto
	802-3-ethernet.s390-subchannels:
	802-3-ethernet.s390-nettype:            --
	802-3-ethernet.s390-options:
	802-3-ethernet.wake-on-lan:             1 (default)
	802-3-ethernet.wake-on-lan-password:    --
	ipv4.method:                            manual
	ipv4.dns:                               114.114.114.114,8.8.4.4
	ipv4.dns-search:                        10.64.33.81.xip.io
	ipv4.addresses:                         10.64.33.81/24
	ipv4.gateway:                           --
	ipv4.routes:
	ipv4.route-metric:                      -1
	ipv4.ignore-auto-routes:                no
	ipv4.ignore-auto-dns:                   no
	ipv4.dhcp-client-id:                    --
	ipv4.dhcp-send-hostname:                yes
	ipv4.dhcp-hostname:                     --
	ipv4.dhcp-fqdn:                         --
	ipv4.never-default:                     no
	ipv4.may-fail:                          yes
	ipv6.method:                            auto
	ipv6.dns:
	ipv6.dns-search:
	ipv6.addresses:
	ipv6.gateway:                           --
	ipv6.routes:
	ipv6.route-metric:                      -1
	ipv6.ignore-auto-routes:                no
	ipv6.ignore-auto-dns:                   no
	ipv6.never-default:                     no
	ipv6.may-fail:                          yes
	ipv6.ip6-privacy:                       -1 (unknown)
	ipv6.dhcp-send-hostname:                yes
	ipv6.dhcp-hostname:                     --
	GENERAL.NAME:                           eth1
	GENERAL.UUID:                           de826ad3-ace9-4777-8b6f-3f935357fa85
	GENERAL.DEVICES:                        eth1
	GENERAL.STATE:                          activated
	GENERAL.DEFAULT:                        no
	GENERAL.DEFAULT6:                       no
	GENERAL.VPN:                            no
	GENERAL.ZONE:                           --
	GENERAL.DBUS-PATH:                      /org/freedesktop/NetworkManager/ActiveConnection/13
	GENERAL.CON-PATH:                       /org/freedesktop/NetworkManager/Settings/0
	GENERAL.SPEC-OBJECT:                    /
	GENERAL.MASTER-PATH:                    --
	IP4.ADDRESS[1]:                         10.64.33.81/24
	IP4.GATEWAY:
	IP4.DNS[1]:                             8.8.4.4
	IP6.ADDRESS[1]:                         fe80::a00:27ff:fec7:35fe/64
	IP6.GATEWAY:

	[vagrant@master81 ~]$ cat /etc/resolv.conf
	# Generated by NetworkManager
	search 10.64.33.81.xip.io
	nameserver 127.0.0.1

	[vagrant@master81 ~]$ sudo systemctl restart NetworkManager.service

	[vagrant@master81 ~]$ cat /etc/resolv.conf
	# Generated by NetworkManager
	search 10.64.33.81.xip.io
	nameserver 127.0.0.1

### Re-config kube-apiserver startup option

Restart

	[vagrant@master81 ~]$ sudo systemctl restart kube-apiserver.service

	[vagrant@master81 ~]$ sudo journalctl --no-tail --no-pager --pager-end -u kube-apiserver.service
	Dec 25 13:49:00 master81 systemd[1]: Starting Kubernetes API server...
	Dec 25 13:49:00 master81 kube-apiserver[17573]: I1225 13:49:00.521960   17573 genericapiserver.go:606] Will report 10.64.33.81 as public IP address.
	Dec 25 13:49:00 master81 kube-apiserver[17573]: I1225 13:49:00.556598   17573 oidc.go:122] Fetched provider config from https://www.10.64.33.90.xip.io:5556: oidc.ProviderConfig{Issuer:(*url.URL)(0xc820246d00), AuthEndpoint:(*url.URL)(0xc820246d80), TokenEndpoint:(*url.URL)(0xc820246e00), UserInfoEndpoint:(*url.URL)(nil), KeysEndpoint:(*url.URL)(0xc820246e80), RegistrationEndpoint:(*url.URL)(nil), ScopesSupported:[]string(nil), ResponseTypesSupported:[]string{"code"}, ResponseModesSupported:[]string(nil), GrantTypesSupported:[]string{"authorization_code", "client_credentials"}, ACRValuesSupported:[]string(nil), SubjectTypesSupported:[]string{"public"}, IDTokenSigningAlgValues:[]string{"RS256"}, IDTokenEncryptionAlgValues:[]string(nil), IDTokenEncryptionEncValues:[]string(nil), UserInfoSigningAlgValues:[]string(nil), UserInfoEncryptionAlgValues:[]string(nil), UserInfoEncryptionEncValues:[]string(nil), ReqObjSigningAlgValues:[]string(nil), ReqObjEncryptionAlgValues:[]string(nil), ReqObjEncryptionEncValues:[]string(nil), TokenEndpointAuthMethodsSupported:[]string{"client_secret_basic"}, TokenEndpointAuthSigningAlgValuesSupported:[]string(nil), DisplayValuesSupported:[]string(nil), ClaimTypesSupported:[]string(nil), ClaimsSupported:[]string(nil), ServiceDocs:(*url.URL)(nil), ClaimsLocalsSupported:[]string(nil), UILocalsSupported:[]string(nil), ClaimsParameterSupported:false, RequestParameterSupported:false, RequestURIParamaterSupported:false, RequireRequestURIRegistration:false, Policy:(*url.URL)(nil), TermsOfService:(*url.URL)(nil), ExpiresAt:time.Time{sec:63618356940, nsec:556583805, loc:(*time.Location)(0x4513e80)}}
	Dec 25 13:49:00 master81 kube-apiserver[17573]: Updating provider config: config=oidc.ProviderConfig{Issuer:(*url.URL)(0xc820247100), AuthEndpoint:(*url.URL)(0xc820247180), TokenEndpoint:(*url.URL)(0xc820247200), UserInfoEndpoint:(*url.URL)(nil), KeysEndpoint:(*url.URL)(0xc820247280), RegistrationEndpoint:(*url.URL)(nil), ScopesSupported:[]string(nil), ResponseTypesSupported:[]string{"code"}, ResponseModesSupported:[]string(nil), GrantTypesSupported:[]string{"authorization_code", "client_credentials"}, ACRValuesSupported:[]string(nil), SubjectTypesSupported:[]string{"public"}, IDTokenSigningAlgValues:[]string{"RS256"}, IDTokenEncryptionAlgValues:[]string(nil), IDTokenEncryptionEncValues:[]string(nil), UserInfoSigningAlgValues:[]string(nil), UserInfoEncryptionAlgValues:[]string(nil), UserInfoEncryptionEncValues:[]string(nil), ReqObjSigningAlgValues:[]string(nil), ReqObjEncryptionAlgValues:[]string(nil), ReqObjEncryptionEncValues:[]string(nil), TokenEndpointAuthMethodsSupported:[]string{"client_secret_basic"}, TokenEndpointAuthSigningAlgValuesSupported:[]string(nil), DisplayValuesSupported:[]string(nil), ClaimTypesSupported:[]string(nil), ClaimsSupported:[]string(nil), ServiceDocs:(*url.URL)(nil), ClaimsLocalsSupported:[]string(nil), UILocalsSupported:[]string(nil), ClaimsParameterSupported:false, RequestParameterSupported:false, RequestURIParamaterSupported:false, RequireRequestURIRegistration:false, Policy:(*url.URL)(nil), TermsOfService:(*url.URL)(nil), ExpiresAt:time.Time{sec:63618356940, nsec:558079767, loc:(*time.Location)(0x4513e80)}}
	Dec 25 13:49:00 master81 kube-apiserver[17573]: I1225 13:49:00.561129   17573 genericapiserver.go:288] Node port range unspecified. Defaulting to 30000-32767.
	Dec 25 13:49:00 master81 kube-apiserver[17573]: E1225 13:49:00.617676   17573 reflector.go:216] k8s.io/kubernetes/plugin/pkg/admission/serviceaccount/admission.go:119: Failed to list *api.Secret: Get http://10.64.33.81:8080/api/v1/secrets?fieldSelector=type%3Dkubernetes.io%2Fservice-account-token&resourceVersion=0: dial tcp 10.64.33.81:8080: getsockopt: connection refused
	Dec 25 13:49:00 master81 kube-apiserver[17573]: E1225 13:49:00.617752   17573 reflector.go:216] k8s.io/kubernetes/plugin/pkg/admission/serviceaccount/admission.go:103: Failed to list *api.ServiceAccount: Get http://10.64.33.81:8080/api/v1/serviceaccounts?resourceVersion=0: dial tcp 10.64.33.81:8080: getsockopt: connection refused
	Dec 25 13:49:00 master81 systemd[1]: Started Kubernetes API server.
	Dec 25 13:49:00 master81 kube-apiserver[17573]: [restful] 2016/12/25 13:49:00 log.go:30: [restful/swagger] listing is available at https://10.64.33.81:6443/swaggerapi/
	Dec 25 13:49:00 master81 kube-apiserver[17573]: [restful] 2016/12/25 13:49:00 log.go:30: [restful/swagger] https://10.64.33.81:6443/swaggerui/ is mapped to folder /swagger-ui/
	Dec 25 13:49:00 master81 kube-apiserver[17573]: I1225 13:49:00.669574   17573 genericapiserver.go:690] Serving securely on 0.0.0.0:6443
	Dec 25 13:49:00 master81 kube-apiserver[17573]: I1225 13:49:00.669586   17573 genericapiserver.go:734] Serving insecurely on 10.64.33.81:8080
	Dec 25 13:49:01 master81 kube-apiserver[17573]: I1225 13:49:01.959379   17573 handlers.go:165] GET /api/v1/services?resourceVersion=0: (889.086µs) 200 [[kubelet/v1.3.1 (linux/amd64) kubernetes/fe4aa01] 10.64.33.90:56096]
	Dec 25 13:49:01 master81 kube-apiserver[17573]: I1225 13:49:01.960694   17573 handlers.go:165] GET /api/v1/endpoints?resourceVersion=0: (751.413µs) 200 [[kube-proxy/v1.3.1 (linux/amd64) kubernetes/fe4aa01] 10.64.33.90:56090]
	Dec 25 13:49:01 master81 kube-apiserver[17573]: I1225 13:49:01.961417   17573 handlers.go:165] GET /api/v1/services?resourceVersion=0: (533.873µs) 200 [[kube-proxy/v1.3.1 (linux/amd64) kubernetes/fe4aa01] 10.64.33.90:56092]
	Dec 25 13:49:01 master81 kube-apiserver[17573]: I1225 13:49:01.962753   17573 handlers.go:165] GET /api/v1/endpoints?resourceVersion=0: (425.7µs) 200 [[kube-proxy/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44824]
	Dec 25 13:49:01 master81 kube-apiserver[17573]: I1225 13:49:01.963263   17573 handlers.go:165] GET /api/v1/services?resourceVersion=0: (442.419µs) 200 [[kube-proxy/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44822]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.007593   17573 handlers.go:165] GET /api/v1/services?resourceVersion=0: (8.406011ms) 200 [[kubelet/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44842]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.008289   17573 handlers.go:165] GET /api/v1/nodes?resourceVersion=0: (623.53µs) 200 [[kube-scheduler/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44826]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.008969   17573 handlers.go:165] GET /apis/extensions/v1beta1/replicasets?resourceVersion=0: (631.451µs) 200 [[kube-scheduler/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44830]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.009336   17573 handlers.go:165] GET /api/v1/persistentvolumeclaims?resourceVersion=0: (321.805µs) 200 [[kube-scheduler/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44832]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.010045   17573 handlers.go:165] GET /api/v1/pods?fieldSelector=spec.nodeName%21%3D%2Cstatus.phase%21%3DFailed%2Cstatus.phase%21%3DSucceeded&resourceVersion=0: (652.188µs) 200 [[kube-scheduler/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44828]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.010445   17573 handlers.go:165] GET /api/v1/pods?fieldSelector=spec.nodeName%3D%2Cstatus.phase%21%3DFailed%2Cstatus.phase%21%3DSucceeded&resourceVersion=0: (354.695µs) 200 [[kube-scheduler/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44834]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.010808   17573 handlers.go:165] GET /api/v1/persistentvolumes?resourceVersion=0: (308.402µs) 200 [[kube-scheduler/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44836]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.011235   17573 handlers.go:165] GET /api/v1/services?resourceVersion=0: (373.377µs) 200 [[kube-scheduler/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44838]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.011649   17573 handlers.go:165] GET /api/v1/replicationcontrollers?resourceVersion=0: (331.112µs) 200 [[kube-scheduler/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44840]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.027728   17573 handlers.go:165] GET /api/v1/pods?fieldSelector=spec.nodeName%3D10.64.33.90&resourceVersion=0: (571.679µs) 200 [[kubelet/v1.3.1 (linux/amd64) kubernetes/fe4aa01] 10.64.33.90:56098]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.028276   17573 handlers.go:165] GET /api/v1/persistentvolumes?resourceVersion=0: (396.46µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/pv-informer] 10.64.33.81:44850]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.028746   17573 handlers.go:165] GET /api/v1/persistentvolumeclaims?resourceVersion=0: (366.172µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/resourcequota-controller] 10.64.33.81:44878]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.029353   17573 handlers.go:165] GET /apis/autoscaling/v1/horizontalpodautoscalers?resourceVersion=0: (535.208µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/horizontal-pod-autoscaler] 10.64.33.81:44854]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.029996   17573 handlers.go:165] GET /api/v1/nodes?resourceVersion=0: (587.512µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/node-informer] 10.64.33.81:44852]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.030314   17573 handlers.go:165] GET /api/v1/persistentvolumes?resourceVersion=0: (275.071µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/persistent-volume-binder] 10.64.33.81:44856]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.030668   17573 handlers.go:165] GET /api/v1/serviceaccounts?fieldSelector=metadata.name%3Ddefault&resourceVersion=0: (298.993µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/service-account-controller] 10.64.33.81:44858]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.031007   17573 handlers.go:165] GET /api/v1/pods?fieldSelector=status.phase%21%3DPending%2Cstatus.phase%21%3DRunning%2Cstatus.phase%21%3DUnknown&resourceVersion=0: (285.434µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/garbage-collector] 10.64.33.81:44860]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.031287   17573 handlers.go:165] GET /api/v1/persistentvolumeclaims?resourceVersion=0: (226.678µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/persistent-volume-binder] 10.64.33.81:44862]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.031740   17573 handlers.go:165] GET /api/v1/services?resourceVersion=0: (371.616µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/resourcequota-controller] 10.64.33.81:44866]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.032242   17573 handlers.go:165] GET /api/v1/secrets?resourceVersion=0: (455.518µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/resourcequota-controller] 10.64.33.81:44870]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.032570   17573 handlers.go:165] GET /apis/batch/v1/jobs?resourceVersion=0: (283.079µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/job-controller] 10.64.33.81:44872]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.033200   17573 handlers.go:165] GET /api/v1/pods?resourceVersion=0: (579.031µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/deployment-controller] 10.64.33.81:44868]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.033517   17573 handlers.go:165] GET /apis/apps/v1alpha1/petsets?resourceVersion=0: (272.652µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44874]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.033861   17573 handlers.go:165] GET /api/v1/configmaps?resourceVersion=0: (290.697µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/resourcequota-controller] 10.64.33.81:44876]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.034423   17573 handlers.go:165] GET /api/v1/pods?resourceVersion=0: (510.354µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/node-controller] 10.64.33.81:44864]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.035664   17573 handlers.go:165] GET /api/v1/pods?fieldSelector=spec.nodeName%3D10.64.33.81&resourceVersion=0: (490.356µs) 200 [[kubelet/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44844]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.037027   17573 handlers.go:165] GET /api/v1/serviceaccounts?resourceVersion=0: (283.663µs) 200 [[kube-apiserver/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:45860]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.037389   17573 handlers.go:165] GET /apis/extensions/v1beta1/daemonsets?resourceVersion=0: (9.048167ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/daemon-set-controller] 10.64.33.81:44848]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.037801   17573 handlers.go:165] GET /api/v1/namespaces?resourceVersion=0: (302.813µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/service-account-controller] 10.64.33.81:44880]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.053377   17573 handlers.go:165] GET /api/v1/persistentvolumeclaims?resourceVersion=0: (427.599µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/pvc-informer] 10.64.33.81:44882]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.053874   17573 handlers.go:165] GET /api/v1/secrets?fieldSelector=type%3Dkubernetes.io%2Fservice-account-token&resourceVersion=0: (432.236µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/tokens-controller] 10.64.33.81:44884]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.054557   17573 handlers.go:165] GET /apis/extensions/v1beta1/deployments?resourceVersion=0: (631.537µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/deployment-controller] 10.64.33.81:44886]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.055216   17573 handlers.go:165] GET /api/v1/pods?resourceVersion=0: (612.372µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/replicaset-controller] 10.64.33.81:44894]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.055517   17573 handlers.go:165] GET /api/v1/serviceaccounts?resourceVersion=0: (253.601µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/tokens-controller] 10.64.33.81:44888]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.055856   17573 handlers.go:165] GET /api/v1/resourcequotas?resourceVersion=0: (287.035µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/resourcequota-controller] 10.64.33.81:44890]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.056373   17573 handlers.go:165] GET /api/v1/nodes?resourceVersion=0: (464.853µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/daemon-set-controller] 10.64.33.81:44892]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.056704   17573 handlers.go:165] GET /api/v1/replicationcontrollers?resourceVersion=0: (286.578µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/resourcequota-controller] 10.64.33.81:44902]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.057175   17573 handlers.go:165] GET /api/v1/services?resourceVersion=0: (417.287µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44896]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.057780   17573 handlers.go:165] GET /apis/extensions/v1beta1/replicasets?resourceVersion=0: (557.164µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/deployment-controller] 10.64.33.81:44900]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.058378   17573 handlers.go:165] GET /api/v1/pods?resourceVersion=0: (556.384µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/pod-informer] 10.64.33.81:44904]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.058853   17573 handlers.go:165] GET /api/v1/nodes?resourceVersion=0: (413.473µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/node-controller] 10.64.33.81:44898]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.059400   17573 handlers.go:165] GET /apis/extensions/v1beta1/replicasets?resourceVersion=0: (504.567µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/replicaset-controller] 10.64.33.81:44912]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.059722   17573 handlers.go:165] GET /api/v1/namespaces?resourceVersion=0: (280.511µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/namespace-controller] 10.64.33.81:44906]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.060015   17573 handlers.go:165] GET /apis/extensions/v1beta1/daemonsets?resourceVersion=0: (239.32µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/node-controller] 10.64.33.81:44908]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.089088   17573 handlers.go:165] GET /api/v1/replicationcontrollers?resourceVersion=0: (366.449µs) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/replication-controller] 10.64.33.81:44848]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.090718   17573 handlers.go:165] GET /api/v1/secrets?fieldSelector=type%3Dkubernetes.io%2Fservice-account-token&resourceVersion=0: (1.539204ms) 200 [[kube-apiserver/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:45866]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.144030   17573 handlers.go:165] GET /api/v1/nodes?fieldSelector=metadata.name%3D10.64.33.81&resourceVersion=0: (182.490232ms) 200 [[kubelet/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44846]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.144558   17573 handlers.go:165] GET /api/v1/nodes?fieldSelector=metadata.name%3D10.64.33.90&resourceVersion=0: (185.037912ms) 200 [[kubelet/v1.3.1 (linux/amd64) kubernetes/fe4aa01] 10.64.33.90:56094]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.213568   17573 handlers.go:165] GET /api/v1/namespaces/kube-system/secrets/default-token-c3ysn: (121.87298ms) 200 [[kubelet/v1.3.1 (linux/amd64) kubernetes/fe4aa01] 10.64.33.90:56098]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.216298   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/wlsadmin: (8.985237ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44848]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.229425   17573 handlers.go:165] GET /api/v1/namespaces/kube-system/endpoints/kube-dns: (9.731637ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44930]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.232399   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/ellis: (3.633894ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44936]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.232640   17573 handlers.go:165] GET /api/v1/namespaces/kube-system/endpoints/dashboard-head: (12.498092ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44932]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.232768   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/homer: (12.046659ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44938]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.232891   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/chronos: (12.455133ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44848]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.237202   17573 handlers.go:165] GET /api/v1/namespaces/kube-system/endpoints/kubernetes-dashboard: (5.411484ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44930]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.239514   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/memcached: (3.92944ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44936]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.239675   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/homestead: (3.684955ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44932]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.239811   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/etcd: (3.472108ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44938]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.239943   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/cassandra: (3.247868ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44848]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.244128   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/sprout: (5.223545ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44930]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.245545   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/ralf: (2.910634ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44936]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.245722   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/bono: (2.664648ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44932]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.245885   17573 handlers.go:165] GET /api/v1/namespaces/stackdocker/endpoints/registry: (2.461232ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44938]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.246080   17573 handlers.go:165] GET /api/v1/namespaces/default/endpoints/wlsmn: (2.389873ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/endpoint-controller] 10.64.33.81:44848]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.281555   17573 handlers.go:165] GET /api/v1/services?resourceVersion=0: (2.341992ms) 200 [[kube-dns/v1.4.0 (linux/amd64) kubernetes/c69e3d3] 10.120.120.13:46180]
	Dec 25 13:49:02 master81 kube-apiserver[17573]: I1225 13:49:02.282524   17573 handlers.go:165] GET /api/v1/endpoints?resourceVersion=0: (2.180602ms) 200 [[kube-dns/v1.4.0 (linux/amd64) kubernetes/c69e3d3] 10.120.120.13:46178]
	Dec 25 13:49:04 master81 kube-apiserver[17573]: I1225 13:49:04.148350   17573 handlers.go:165] GET /api/v1/pods?fieldSelector=spec.nodeName%3D10.64.33.92: (7.551885ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/node-controller] 10.64.33.81:44936]
	Dec 25 13:49:04 master81 kube-apiserver[17573]: I1225 13:49:04.412486   17573 handlers.go:165] GET /api/v1/nodes/10.64.33.81: (1.596707ms) 200 [[kubelet/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44976]
	Dec 25 13:49:04 master81 kube-apiserver[17573]: I1225 13:49:04.495390   17573 handlers.go:165] PUT /api/v1/nodes/10.64.33.81/status: (4.878412ms) 200 [[kubelet/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44976]
	Dec 25 13:49:04 master81 kube-apiserver[17573]: I1225 13:49:04.911351   17573 handlers.go:165] GET /api/v1/nodes: (1.29381ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/node-controller] 10.64.33.81:44936]
	Dec 25 13:49:04 master81 kube-apiserver[17573]: I1225 13:49:04.945970   17573 handlers.go:165] GET /api/v1/nodes/10.64.33.90: (1.608794ms) 200 [[kubelet/v1.3.1 (linux/amd64) kubernetes/fe4aa01] 10.64.33.90:56104]
	Dec 25 13:49:05 master81 kube-apiserver[17573]: I1225 13:49:05.237403   17573 handlers.go:165] PUT /api/v1/nodes/10.64.33.90/status: (8.909392ms) 200 [[kubelet/v1.3.1 (linux/amd64) kubernetes/fe4aa01] 10.64.33.90:56104]
	Dec 25 13:49:09 master81 kube-apiserver[17573]: I1225 13:49:09.919438   17573 handlers.go:165] GET /api/v1/nodes: (5.818813ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/node-controller] 10.64.33.81:44936]
	Dec 25 13:49:14 master81 kube-apiserver[17573]: I1225 13:49:14.131578   17573 handlers.go:165] GET /api/v1/pods?fieldSelector=spec.nodeName%3D10.64.33.224: (7.140244ms) 200 [[kube-controller-manager/v1.3.7 (linux/amd64) kubernetes/a2cba27/node-controller] 10.64.33.81:44936]
	Dec 25 13:49:14 master81 kube-apiserver[17573]: I1225 13:49:14.501772   17573 handlers.go:165] GET /api/v1/nodes/10.64.33.81: (3.834021ms) 200 [[kubelet/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.81:44976]

Token from example app

![example-app](./example-app.png)

Copy and paste into `kubectl` as

	[tangfx@localhost ~]$ kubectl config view
	apiVersion: v1
	clusters:
	- cluster:
		certificate-authority-data: REDACTED
		server: https://10.64.33.81:6443
	  name: kube
	contexts:
	- context:
		cluster: kube
		user: admin
	  name: kube-admin
	current-context: kube-admin
	kind: Config
	preferences: {}
	users:
	- name: admin
	  user:
		client-certificate-data: REDACTED
		client-key-data: REDACTED

	[tangfx@localhost ~]$ kubectl --cluster=kube --token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjMzN2Q1YWQ3OGM1NDRkNGY3ZDA4NTQ1MDEwYWUxODY4NDA5ODk0NjQiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiJleGFtcGxlLWFwcCIsImVtYWlsIjoidGFuZ2Z4OTBAZXhhbXBsZS5jb20iLCJleHAiOjE0ODMwMDg5NTMsImlhdCI6MTQ4Mjk2NTc1MywiaXNzIjoiaHR0cHM6Ly93d3cuMTAuNjQuMzMuOTAueGlwLmlvOjU1NTYiLCJuYW1lIjoidGFuZ2Z4OTAiLCJzdWIiOiJ0YW5nZng5MC1pZCJ9.Toi0kVEQJ_A8bYVwmNXLfTSnO4vu6rIcdeSr5OeeyxjRXfpIn3mMAg4UvNTRWkZDPY7F859OJdcNcrtat3bnvMkE09ybmL8WBLq059fQk397Sn8m3RSuVwm1pbRIx4bc0WZr3neZGjmqNZAccqBn6mus_H6ItemMCtEqCDNI7gQ8zRPEhAlMWC0F-rcAHsAVVoeIs_kOyw4RkqiemS3h26ZItplzNLmlS2v3qPu9K30bhcgQsMeoJUFsK2HDXNLWSdbRI6sLCiYOwpAh410Cx-aefiawWNslPS-3l4dZmmJdfoNpXwo0wIns34Enep3g_jriDD5naMor_fknKGDeQQ get all --all-namespaces
	NAMESPACE     NAME                                       CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
	default       kubernetes                                 10.123.240.1     <none>        443/TCP    21h
	kube-system   kubernetes-dashboard-ci                    10.123.251.129   <nodes>       80/TCP     17h
	NAMESPACE     NAME                                       READY            STATUS        RESTARTS   AGE
	kube-system   kubernetes-dashboard-ci-1507090773-xm84v   1/1              Running       0          17h
	
Or save into **KUBECONFIG**

	[tangfx@localhost ~]$ kubectl config set-credentials dex-example --token=eyJhbGciOiJSUzI1NiIsImtpZCI6ImNmMjI4ZWM3ZjMzZWNiNjM1ODUwMDVjM2NjYzA1NzRmMTFiZWI2NTQiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiJleGFtcGxlLWFwcCIsImVtYWlsIjoidGFuZ2Z4OTBAZXhhbXBsZS5jb20iLCJleHAiOjE0ODI3NzAwMzAsImlhdCI6MTQ4MjcyNjgzMCwiaXNzIjoiaHR0cHM6Ly93d3cuMTAuNjQuMzMuOTAueGlwLmlvOjU1NTYiLCJuYW1lIjoidGFuZ2Z4OTAiLCJzdWIiOiJ0YW5nZng5MC1pZCJ9.DvNIhXhj7uyAJr-0n6Yo8Tqjkz5MVCJ-HWeJ6-9VN1hskC4nNMVo1lbOfKehgFPN84_17_jZmJPBUPIB738RJBkwigISHbQHmILQKGemPR6CS_s5lguaiRZpTLrVXY5FW6E0dfNjr9BW2YCTVavgi3zhVd2oSnT6J-vCupvf4hko28THsZ51t4LZPRsSYnrZ16IPqeUKOFsikdI7xF3CIuk4iWbeWYU2LSc55WAZezVnSJlwh6Jveikm3uDm9BDmJNM2-N32CLpjk6f4ML-RScYA9E77kxS5OdbzO7GTk_tm-qKZMP5AMErUGZkFtB2FQ724e1oTvCtftymN55ujZw
	user "dex-example" set.

	[tangfx@localhost ~]$ kubectl config view
	apiVersion: v1
	clusters:
	- cluster:
		certificate-authority-data: REDACTED
		server: https://10.64.33.81:6443
	  name: kube
	contexts:
	- context:
		cluster: kube
		user: admin
	  name: kube-admin
	current-context: kube-admin
	kind: Config
	preferences: {}
	users:
	- name: admin
	  user:
		client-certificate-data: REDACTED
		client-key-data: REDACTED
	- name: dex-example
	  user:
		token: eyJhbGciOiJSUzI1NiIsImtpZCI6ImNmMjI4ZWM3ZjMzZWNiNjM1ODUwMDVjM2NjYzA1NzRmMTFiZWI2NTQiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiJleGFtcGxlLWFwcCIsImVtYWlsIjoidGFuZ2Z4OTBAZXhhbXBsZS5jb20iLCJleHAiOjE0ODI3NzAwMzAsImlhdCI6MTQ4MjcyNjgzMCwiaXNzIjoiaHR0cHM6Ly93d3cuMTAuNjQuMzMuOTAueGlwLmlvOjU1NTYiLCJuYW1lIjoidGFuZ2Z4OTAiLCJzdWIiOiJ0YW5nZng5MC1pZCJ9.DvNIhXhj7uyAJr-0n6Yo8Tqjkz5MVCJ-HWeJ6-9VN1hskC4nNMVo1lbOfKehgFPN84_17_jZmJPBUPIB738RJBkwigISHbQHmILQKGemPR6CS_s5lguaiRZpTLrVXY5FW6E0dfNjr9BW2YCTVavgi3zhVd2oSnT6J-vCupvf4hko28THsZ51t4LZPRsSYnrZ16IPqeUKOFsikdI7xF3CIuk4iWbeWYU2LSc55WAZezVnSJlwh6Jveikm3uDm9BDmJNM2-N32CLpjk6f4ML-RScYA9E77kxS5OdbzO7GTk_tm-qKZMP5AMErUGZkFtB2FQ724e1oTvCtftymN55ujZw

	[tangfx@localhost ~]$ kubectl config set-context dex-example --cluster=kube --user=dex-example
	context "dex-exaple" set.

	[tangfx@localhost ~]$ kubectl config use-context dex-example
	switched to context "dex-example".

Validation

	[tangfx@localhost dex]$ kubectl --namespace=stackdocker get pods -o wide
	NAME                        READY     STATUS    RESTARTS   AGE       IP             NODE
	registry-2499285598-762xm   1/1       Running   17         35d       10.120.120.9   10.64.33.81

	[vagrant@master81 ~]$ sudo journalctl --no-tail --no-pager --pager-end -u kube-apiserver.service
	Dec 25 14:36:02 master81 kube-apiserver[17573]: I1225 14:36:02.680770   17573 handlers.go:165] GET /api: (348.469µs) 200 [[kubectl/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.90:56802]
	Dec 25 14:36:02 master81 kube-apiserver[17573]: I1225 14:36:02.681888   17573 handlers.go:165] GET /apis: (364.238µs) 200 [[kubectl/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.90:56802]
	Dec 25 14:36:02 master81 kube-apiserver[17573]: I1225 14:36:02.683210   17573 handlers.go:165] GET /api: (267.053µs) 200 [[kubectl/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.90:56802]
	Dec 25 14:36:02 master81 kube-apiserver[17573]: I1225 14:36:02.684225   17573 handlers.go:165] GET /apis: (384.043µs) 200 [[kubectl/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.90:56802]
	Dec 25 14:36:02 master81 kube-apiserver[17573]: I1225 14:36:02.686377   17573 handlers.go:165] GET /api/v1/namespaces/stackdocker/pods: (1.081545ms) 200 [[kubectl/v1.3.7 (linux/amd64) kubernetes/a2cba27] 10.64.33.90:56802]

